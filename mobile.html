<!DOCTYPE html>
<html ng-app="walkApp" ng-controller="WalkController" data-mobile="1">
    <head>
	<title>Nodewalk</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">	
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
	<link rel="stylesheet" href="/stylesheets/mobile.css" />
	<link rel="canonical" href="/" type="text/html" />	
	<script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.4/angular.min.js"></script>    
	<script src="http://www.google.com/jsapi"></script>
	<script src="http://maps.google.com/maps/api/js?sensor=true&libraries=geometry,drawing"></script>
	<script src="/javascripts/controllers.js"></script>
	<script src="/javascripts/path_manager.js"></script>
	<script src="/javascripts/jquery.flot.min.js"></script>
	<script src="/javascripts/jquery.flot.resize.min.js"></script>	
    </head>

    <body>
	<div data-role="page" id="page-maps" data-theme="a">
	    <div data-role="panel" id="panel-search" data-theme="a" >
		<form data-role="collapsible" data-collapsed-icon="carat-d" data-expanded-icon="carat-u" data-collapsed="false" class="ui-mini">
		    <legend>search form</legend>
		    <input type="hidden" name="latitude" value="{{searchForm.latitude}}" />
		    <input type="hidden" name="longitude" value="{{searchForm.longitude}}" />
		    <input type="hidden" name="radius" value="{{searchForm.radius}}" />
		    <input type="hidden" name="cities" value="{{searchForm.cities}}"  />
		    <input type="hidden" name="search_path" value="{{searchForm.searchPath}}"  />
		    <select ng-model="searchForm.filter" data-mini="true">
			<option value="any">Filter</option>
			<option value="neighborhood">Neighborhood</option>
			<option value="cities">Cities</option>
			<option value="hausdorff">Hausdorff</option>
			<option value="crossing">Crossing</option>
		    </select>
		    <div>
			<select ng-model="searchForm.month" data-inline="true" data-mini="true">
			    <option value="">month</option>
			    <option value="1">Jan</option>
			    <option value="2">Feb</option>
			    <option value="3">Mar</option>
			    <option value="4">Apr</option>
			    <option value="5">May</option>
			    <option value="6">Jun</option>
			    <option value="7">Jul</option>
			    <option value="8">Aug</option>
			    <option value="9">Sep</option>
			    <option value="10">Oct</option>
			    <option value="11">Nov</option>
			    <option value="12">Dec</option>
			</select>
			<select ng-model="searchForm.year"  data-inline="true" data-mini="true">
			    <option value="">year</option>
			    <option ng-repeat="y in years" value="{{y}}">{{y}}</option>
			</select>
		    </div>
		    <select ng-model="searchForm.order" data-mini="true" >
			<option value="newest_first" ng-if="searchForm.filter != 'hausdorff'">newest first</option>
			<option value="oldest_first" ng-if="searchForm.filter != 'hausdorff'">oldest first</option>
			<option value="longest_first" ng-if="searchForm.filter != 'hausdorff'">longest first</option>
			<option value="shortest_first" ng-if="searchForm.filter != 'hausdorff'">shortest first</option>
			<option value="easternmost_first" ng-if="searchForm.filter != 'hausdorff'">easternmost first</option>
			<option value="westernmost_first" ng-if="searchForm.filter != 'hausdorff'">westernmost first</option>
			<option value="southernmost_first" ng-if="searchForm.filter != 'hausdorff'">southernmost first</option>
			<option value="northernmost_first" ng-if="searchForm.filter != 'hausdorff'">northernmost first</option>
			<option value="nearest_first" ng-if="searchForm.filter == 'hausdorff'">nearest first</option>
		    </select>
		    <div>
			<label for="limit">limit</label>
			<input type="text" ng-model="searchForm.limit" data-inline="true"  />
		    </div>
		    <div>
			<a ng-click="search()" href="#" class="ui-btn ui-btn-inline ui-mini ui-icon-search ui-btn-icon-left">search</a>
			<input type="reset" value="reset" class="ui-btn ui-btn-inline ui-mini" data-mini="true" data-inline="true" />
		    </div>
		</form>
		<div>
		    <div id="message" ng-show="walks != null">
			<p ng-switch on="total_count">
			    <span ng-switch-when="null">successfully saved</span>
			    <span ng-switch-when="0">No results</span>
			    <span ng-switch-when="1">1 / 1 item</span>
			    <span ng-switch-default>{{ walks.length }} / {{ total_count }} items</span>
			    
			</p>
			<a href="#" ng-click="showPaths()" ng-show="walks.length > 0" class="ui-btn ui-mini ui-icon-carat-r ui-btn-icon-right" >show all</a>
		    </div>
		    <ul data-role="listview" data-inset="false" class="ui-mini">
			<li ng-repeat="item in walks">
			    <a href="#"  ng-click="showPath(item.id);">{{item.date}}:{{item.title}}</a>
			</li>
		    </ul>
		    <a href="#" class="ui-btn ui-mini ui-icon-carat-d ui-btn-icon-left" ng-show="params" ng-click="getNext(params)">more</a>
		</div>
	    </div>
	    
            <div data-role="header">
		<a href="#panel-search"  class="ui-mini ui-btn ui-icon-search ui-btn-icon-notext"></a>
		<h1>Nodewalk</h1>
		<div data-role="controlgroup" data-type="horizontal" class="ui-btn-right">
		  <a href="#menu-edit" data-rel="popup" class="ui-btn ui-icon-edit ui-btn-icon-notext"></a>		  
		  <a href="#menu-service" data-rel="popup" class="ui-btn ui-icon-eye ui-btn-icon-notext"></a>
                </div>
	    </div>
	    <div data-role="popup" id="menu-service" class="menu" >
		<ul data-role="listview" data-inset="true">
	            <li data-icon="false"><a href="#" ng-click="showElevation()" >elevation</a></li>
                    <li data-icon="false"><a href="#" ng-click="showPanorama()">street view</a></li>
                    <li data-icon="false"><a href="#" ng-click="closeService()">close</a></li>		    
		</ul>
	    </div>
	    <div data-role="popup" id="menu-edit" class="menu">
		<ul data-role="listview" data-inset="true">
	            <li data-icon="false"><a href="#" ng-click="deletePath()" >delete</a></li>
                    <li data-icon="false"><a href="#" ng-click="deleteAll()">clear</a></li>
		</ul>
	    </div>
    
	    <div role="main" id="main-box" class="ui-content">
		<div my-map id="map"></div>
		<div id="elevation-box"  ng-show="currentService == 'elevation'">
		    <a href="#" class="ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all close" ng-click="closeService()"></a>
                    <div my-elevation></div>
		</div>
		<div id="panorama-box"  ng-show="currentService == 'panorama'">
                    <div id="panorama" my-panorama></div>
                    <div id="panorama_control">
			<a href="#" class="ui-btn ui-btn-inline ui-icon-arrow-l ui-btn-icon-notext ui-mini" ng-click="backwardPanorama()"></a>
			<a href="#" class="ui-btn ui-btn-inline ui-icon-carat-l ui-btn-icon-notext ui-mini" ng-click="prevPanorama()"></a>
			<span class="label label-info"><span>{{panoramaIndex}}</span> / <span>{{panoramaCount}}</span></span>
			<a  href="#" class="ui-btn ui-btn-inline ui-icon-carat-r ui-btn-icon-notext ui-mini" ng-click="nextPanorama()"></a>
			<a href="#" class="ui-btn ui-btn-inline ui-icon-arrow-r ui-btn-icon-notext ui-mini" ng-click="forwardPanorama()"></a>
			
                    </div>
		</div>
		<div data-role="popup" id="tooltip" data-transition="slide">
		    <p>{{ tooltip }}</p>
		</div>
	    </div>
	</div>
    </body>
</html>
